flowchart LR
  subgraph Clients
    W[Web app]
    R[RN app]
    O[Other tool]
  end

  subgraph Packages
    SDK[TS SDK\npackages/sdk-js]
    VIEW[Three.js viewer\npackages/viewer-three]
    SPEC[BakeSpec\npackages/shared-spec]
  end

  subgraph Service
    API[img2mesh3d API\npackages/img2mesh3d]
  end

  subgraph Data
    B[(Blob store\n(local fs / S3))]
    J[(Job store\n(SQLite / DynamoDB))]
    Q[[Queue\n(polling / SQS)]]
  end

  subgraph Workers
    WP[img2mesh3d worker\npackages/img2mesh3d]
    MODELS[(Local models\n(seg + views + depth))]
  end

  W --> SDK --> API
  R --> SDK
  O --> SDK

  SPEC --> SDK
  SPEC --> API
  SPEC --> WP

  API --> B
  API --> J
  API --> Q

  WP --> Q
  WP --> B
  WP --> J
  WP --> MODELS

  VIEW --> W
